<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DELTARUNE Menu Recreation</title>
  <style>
    /* ... (estilos existentes) ... */

    .play-do-not {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
    }

    .play-do-not span {
      font-size: 24px;
      color: yellow;
      cursor: pointer;
    }

    .play-do-not span.selected {
      color: red; /* Resaltar la opción seleccionada */
    }

    .icon-container {
      display: flex;
      align-items: center;
    }

    .icon {
      width: 32px;
      height: 32px;
      margin-left: 20px;
      background-color: white;
    }

    .icon.locked {
      opacity: 0.5; /* Opacidad para capítulos bloqueados */
    }

    .icon img {
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <audio autoplay loop>
    <source src="menu.mp3" type="audio/mpeg">
  </audio>

  <div class="menu" id="menu">
    <!-- CAPÍTULOS DEL MENÚ -->
    <div class="menu-item selected">
      <span><img src="heart.png" alt="heart" class="heart"></span>
      <span class="chapter-name">Chapter 1</span>
      <span class="chapter-desc">The Beginning</span>
      <div class="play-do-not">
        <span class="play selected">Play</span>
        <span class="do-not">Do Not</span>
      </div>
      <div class="icon-container">
        <div class="icon">
          <img src="spade.png" alt="Spade">
        </div>
      </div>
    </div>
    <div class="menu-item locked">
      <span></span>
      <span class="chapter-name">Chapter 2</span>
      <span class="chapter-desc">A Cyber's World</span>
      <div class="play-do-not">
        <span class="play">Play</span>
        <span class="do-not">Do Not</span>
      </div>
      <div class="icon-container">
        <div class="icon locked">
          <img src="cyber-spade.png" alt="Cyber Spade">
        </div>
      </div>
    </div>
    <div class="menu-item locked">
      <span></span>
      <span class="chapter-name">Chapter 3</span>
      <span class="chapter-desc">Late Night</span>
      <div class="play-do-not">
        <span class="play">Play</span>
        <span class="do-not">Do Not</span>
      </div>
      <div class="icon-container">
        <div class="icon locked">
          <img src="moon-spade.png" alt="Moon Spade">
        </div>
      </div>
    </div>
    <div class="menu-item locked">
      <span></span>
      <span class="chapter-name">Chapter 4</span>
      <span class="chapter-desc">Prophecy</span>
      <div class="play-do-not">
        <span class="play">Play</span>
        <span class="do-not">Do Not</span>
      </div>
      <div class="icon-container">
        <div class="icon locked">
          <img src="prophecy-spade.png" alt="Prophecy Spade">
        </div>
      </div>
    </div>
    <div class="menu-item locked">
      <span></span>
      <span class="chapter-name">Chapter 5</span>
      <span class="chapter-desc">--</span>
      <div class="play-do-not">
        <span class="play">Play</span>
        <span class="do-not">Do Not</span>
      </div>
      <div class="icon-container">
        <div class="icon locked">
          <img src="empty-spade.png" alt="Empty Spade">
        </div>
      </div>
    </div>
    <div class="menu-item locked">
      <span></span>
      <span class="chapter-name">Chapter 6</span>
      <span class="chapter-desc">--</span>
      <div class="play-do-not">
        <span class="play">Play</span>
        <span class="do-not">Do Not</span>
      </div>
      <div class="icon-container">
        <div class="icon locked">
          <img src="empty-spade.png" alt="Empty Spade">
        </div>
      </div>
    </div>
    <div class="menu-item locked">
      <span></span>
      <span class="chapter-name">Chapter 7</span>
      <span class="chapter-desc">--</span>
      <div class="play-do-not">
        <span class="play">Play</span>
        <span class="do-not">Do Not</span>
      </div>
      <div class="icon-container">
        <div class="icon locked">
          <img src="empty-spade.png" alt="Empty Spade">
        </div>
      </div>
    </div>

    <div class="bottom-bar">
      <span>(C) Toby Fox 2018–2025<br>DELTARUNE v14</span>
      <span id="quit">Quit</span>
      <span>日本語</span>
      <span class="spade-icons">♠ ♠ ♠</span>
    </div>
    <hr>
  </div>

  <!-- Modal de confirmación -->
  <div class="modal" id="confirmationModal">
    <div class="modal-content">
      <h3>¿Estás seguro de que quieres ir al capítulo?</h3>
      <button id="confirmYes">Sí</button>
      <button id="confirmNo">No</button>
    </div>
  </div>

  <script>
    const items = document.querySelectorAll('.menu-item');
    let currentIndex = 0;

    function updateSelection() {
      items.forEach((item, index) => {
        item.classList.remove('selected');
        const heartSpan = item.querySelector('span');
        if (heartSpan) heartSpan.innerHTML = '';
      });
      const currentItem = items[currentIndex];
      currentItem.classList.add('selected');
      const heartContainer = currentItem.querySelector('span');
      heartContainer.innerHTML = '<img src="heart.png" class="heart">';
    }

    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowDown') {
        let nextIndex = currentIndex;
        do {
          nextIndex = (nextIndex + 1) % items.length;
        } while (items[nextIndex].classList.contains('locked') && nextIndex !== currentIndex);

        if (!items[nextIndex].classList.contains('locked')) {
          currentIndex = nextIndex;
          updateSelection();
          new Audio('select.mp3').play();
        }
      } else if (e.key === 'ArrowUp') {
        let prevIndex = currentIndex;
        do {
          prevIndex = (prevIndex - 1 + items.length) % items.length;
        } while (items[prevIndex].classList.contains('locked') && prevIndex !== currentIndex);

        if (!items[prevIndex].classList.contains('locked')) {
          currentIndex = prevIndex;
          updateSelection();
          new Audio('select.mp3').play();
        }
      } else if (e.key.toLowerCase() === 'z') {
        const selected = items[currentIndex];
        if (!selected.classList.contains('locked')) {
          document.getElementById('confirmationModal').style.display = 'flex';
        }
      } else if (e.key.toLowerCase() === 'x') {
        alert('Volviendo al menú anterior');
      }
    });

    document.getElementById('quit').addEventListener('click', () => {
      alert("No puedes, lol");
    });

    document.getElementById('confirmYes').addEventListener('click', () => {
      document.getElementById('confirmationModal').style.display = 'none';
      const selected = items[currentIndex];
      selected.classList.add('book-close'); // Animación de cierre tipo libro
      setTimeout(() => {
        window.location.href = 'chapter1.html'; // Redirigir al capítulo seleccionado
      }, 1000); // Esperar la animación
    });

    document.getElementById('confirmNo').addEventListener('click', () => {
      document.getElementById('confirmationModal').style.display = 'none';
    });

    // Manejar clics en "Play" y "Do Not"
    document.querySelectorAll('.play-do-not span').forEach(span => {
      span.addEventListener('click', () => {
        const playDoNotContainer = span.closest('.play-do-not');
        const playSpan = playDoNotContainer.querySelector('.play');
        const doNotSpan = playDoNotContainer.querySelector('.do-not');

        if (span.classList.contains('play')) {
          playSpan.classList.add('selected');
          doNotSpan.classList.remove('selected');
        } else {
          doNotSpan.classList.add('selected');
          playSpan.classList.remove('selected');
        }
      });
    });
  </script>
</body>
</html>
